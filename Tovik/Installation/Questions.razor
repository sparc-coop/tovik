@page "/questions"
@using Microsoft.AspNetCore.Html
@layout MainLayout

<PageTitle>Tovik - Pricing and Questions</PageTitle>
<article class="install-page">
    <div class="page-container">

        <header class="page-header">
            <h2>Pricing and Questions</h2>
            <p class="subheader">Free to start. Pro when you need it. No subscriptions, no tracking.</p>
        </header>

        @if (Product != null)
        {
            <section class="pricing">
                <header>
                    <h3>Tovik Free</h3>
                    <span>@Product.FormattedZeroPrice</span>
                    <a class="button primary-btn" href="/install">Start Now</a>
                </header>
                <ul>
                    <li>
                        Translate up to <strong>20</strong> pages into your visitors' preferred language
                    </li>
                    <li>
                        Unlimited languages per page (130+ supported!)
                    </li>
                    <li>
                        Unlimited page views
                    </li>
                    <li>
                        Unlimited domains
                    </li>
                </ul>
                <footer>
                    <a class="button primary-btn" href="/install">Start Now</a>
                </footer>
            </section>

            <section class="pricing">
                <header>
                    <h3>Tovik Pro</h3>
                    <span>@Product.FormattedPrice</span>
                    <button class="primary-btn" @onclick=Buy>Buy on Sparc Store</button>
                </header>
                <ul>
                    <li>
                        Translate up to <strong>500</strong> pages into your visitors' preferred language
                    </li>
                    <li>
                        Unlimited languages per page (130+ supported!)
                    </li>
                    <li>
                        Unlimited page views
                    </li>
                    <li>
                        Unlimited domains
                    </li>
                </ul>
                <footer>
                    <button class="primary-btn" @onclick=Buy>Buy on Sparc Store</button>
                </footer>
            </section>
        }

        <section class="faq">
            <header>
                <h3>Frequently Asked Questions</h3>
            </header>
            <dl>
                @foreach (var question in FAQ)
                {
                    <div class="question">
                        <span>?</span>
                        <BubbleTail Fill="#FF945E" />
                    </div>
                    <dt>
                        @question.Key
                    </dt>
                    <div class="answer">
                        <span>!</span>
                        <BubbleTail Fill="#BBE0F5" />
                    </div>
                    <dd>@((MarkupString)question.Value)</dd>
                }
            </dl>

            <footer>
                Need help with anything? <a href="mailto:support@sparc.coop">support@sparc.coop</a>
            </footer>
        </section>
    </div>
</article>

@inject ISparcBilling Billing
@inject ISparcAura Aura
@inject Microsoft.Extensions.Configuration.IConfiguration Config
@code {
    GetProductResponse? Product;
    Dictionary<string, string> FAQ = new()
    {
        { "What is Tovik?", "Tovik is a multilingual translation tool that instantly translates your website into 130+ languages with a single, simple install. No extra plugins, no hassle." },
        { "Why do I need Tovik if other translation tools exist?", "Most tools expect your visitors to do the work to install their own translation plugin. Tovik flips that: it's installed on your site and handles translation automatically for every visitor, with no setup required on their end." },
        { "How does Tovik work?", "Tovik detects each visitor’s preferred language using their browser settings. If their language doesn’t match your site’s language, Tovik kicks in and translates every content element on the page. Results are nearly instantaneous, and translations are cached for future users that visit the same page in the same language." },
        { "Is the free version really free?", "Yes! You can translate up to 20 pages across unlimited domains and languages. No credit card, no catch." },
        { "What happens when I reach the 20-page limit?", "Tovik will stop translating new pages, but your first 10 will continue translating automatically, forever, in every supported language Tovik offers." },
        { "Do I need coding experience to install Tovik?", "Not at all. Tovik has plug-and-play support for WordPress and Wix, with more platforms coming soon. Or just drop one line of code into your site's HTML, and you're done." },
        { "How do I install Tovik?", "Just install the Tovik plugin for your platform, or copy a single line of code into your website's HTML. Full instructions are <a href=\"/Install\">in our docs</a>, and it takes less than a minute." },
        { "Is Tovik compatible with my website?", "If your site lets you add custom code, you’re good to go. Tovik works with WordPress, Wix, and pretty much anything else." },
        { "How many languages does Tovik support?", "Over 130 languages, covering most of the world’s major languages and regions." },
        { "Do you track user data or visitors?", "Never. Tovik only tracks translation usage -- just a simple page count. User preferences stay local in their browser. No tracking, no storage, no profiling." },
        { "What does the Pro version include?", "Tovik Pro unlocks up to 500 translated pages across unlimited domains, with all the benefits of the free version -- just more scale." },
        { "Is there a subscription fee?", "Nope. Tovik Pro is a one-time purchase. No subscriptions, no recurring charges, no surprises. Really." },
        { "Can I use Tovik on multiple domains?", "Yes. Both the free and Pro versions support unlimited domains. Only the page count matters. So whether you have a single domain with 500 pages or 20 domains with 20 pages each, you're covered with Tovik Pro." },
        { "What if I have more than 500 pages of content?", "No problem—just grab another copy of Tovik. Each purchase adds 500 more pages to your account, so you can scale as far as your site goes." },
        { "How do I get support?", "Just click the link below to email our team anytime. We’re here to help with setup, troubleshooting, or anything else." }
    };

    protected override async Task OnInitializedAsync()
    {
        Product = await Billing.GetProductAsync(Config["ProductId"]!);
    }

    async Task Buy()
    {
        var totp = await Aura.GetSparcCode();
        if (totp != null)
            Nav.NavigateTo($"{Config["SparcStore"]}?_auth=totp:{totp.Code}");
    }
}