@page "/install"
@layout MainLayout

<PageTitle>Tovik - How to Install</PageTitle>
<article class="install-page">
    <div class="page-container">

        <header class="page-header">
            <h2>Set Up Tovik in Minutes</h2>
            <p class="subheader">Choose your website's platform:</p>
            <ul class="platforms">
                @foreach (var platform in Platforms)
                {
                    <li class="@(SelectedPlatform == platform ? "selected" : "") @(ComingSoon.Contains(platform) ? "comingsoon" : "")">
                        <button class="primary-btn" @onclick="@(() => Select(platform))">
                            @platform
                            @if (ComingSoon.Contains(platform))
                            {
                                <span>(coming soon)</span>
                            }
                        </button>
                    </li>
                }
            </ul>
        </header>

        @if (SelectedPlatform == "HTML")
        {
            <section class="step-1">
                <img src="/images/Star.svg" alt="Star" />
                <header>
                    <aside>Step 1 (required)</aside>
                    <h3>Add Tovik To Your Site</h3>
                </header>
                <div>
                    <p>
                        To install Tovik, add this line of code to your site (preferably just before the closing <code translate="no">&lt;&sol;body&gt;</code> tag):
                    </p>
                    <CodeBlock CanCopy=true>
                        @("<script type=\"module\" src=\"https://tovik.app/tovik.js\"></script>")
                    </CodeBlock>
                    <p>
                        That’s it. Tovik will now detect your visitors’ browser language and display your site accordingly.
                    </p>
                    <ul>
                        <li>One line of code</li>
                        <li>No setup dashboard</li>
                        <li>No API keys</li>
                        <li>No stress</li>
                    </ul>
                    <p>
                        If that’s all you need, you’re good to go. But if you want to give users more control or tailor what gets translated, keep reading.
                    </p>
                </div>
            </section>
        }

        @if (SelectedPlatform == "WordPress")
        {
            <section class="step-1">
                <header>
                    <aside>Step 1</aside>
                    <h3>Add Tovik To Your WordPress Site</h3>
                </header>
                <div>
                    <ol>
                        <li>
                            Download the official Tovik WordPress plugin here:<br />
                            <a href="/plugins/wordpress/tovik.zip" class="button primary-btn">Download Tovik for WordPress</a>
                        </li>
                        <li>Go to your WordPress admin dashboard and navigate to <strong>Plugins</strong> &gt; <strong>Add New</strong>.</li>
                        <li>Click <strong>Upload Plugin</strong> and select the downloaded <code translate="no">tovik.zip</code> file.</li>
                        <li>Click <strong>Install Now</strong>.</li>
                        <li>Once installed, click <strong>Activate Plugin</strong>.</li>
                    </ol>
                    <p>That's it! Your site will now start automatically translating all of your content based on your visitors' language preferences.</p>
                </div>
            </section>
        }

        @if (SelectedPlatform == "Wix")
        {
            <section class="step-1">
                <header>
                    <aside>Step 1</aside>
                    <h3>Add Tovik To Your Wix Site</h3>
                </header>
                <div>
                    <ol>
                        <li>
                            Open the Tovik install link:<br />
                            <a href="https://wix.to/AmoRmd7" class="button primary-btn" target="_blank" rel="noopener">Install Tovik for Wix</a>
                        </li>
                        <li>Click <strong>Add to Site</strong>.</li>
                        <li>Choose the Wix site you want to install Tovik on and click <strong>Continue</strong>.</li>
                        <li>Review the requested permissions, then click <strong>Accept &amp; Add</strong>.</li>
                        <li>You’ll be redirected to your Wix dashboard → the Tovik app panel will open.</li>
                        <li>Click <strong>Activate Tovik</strong>.</li>
                        <li>Publish your site to apply the changes.</li>
                    </ol>
                    <p>That's it! Your site will now start automatically translating all of your content based on your visitors' language preferences.</p>
                </div>
            </section>
        }

        @if (SelectedPlatform == "SquareSpace")
        {
            <section class="step-1">
                <header>
                    <aside>Step 1</aside>
                    <h3>Add Tovik To Your SquareSpace Site</h3>
                </header>
                <div>
                    <ol>
                        <li>Log in to your Squarespace account.</li>
                        <li>Open the site on which you want to enable Tovik.</li>
                        <li>Click <strong>Edit Site</strong> to open the site editor.</li>
                        <li>
                            In the left-hand menu, look for the <strong>Code Injection</strong> panel. Depending on your Squarespace version, it may appear under:
                            <ul>
                                <li><strong>Pages → Custom Code → Code Injection</strong>, OR</li>
                                <li><strong>Settings → Advanced (or Website Tools) → Code Injection</strong>.</li>
                            </ul>
                        </li>
                        <li>
                            Paste the following snippet into the section labeled <strong>Footer</strong>:
                        </li>
                        <CodeBlock CanCopy=true>
                            @("<script type=\"module\" src=\"https://tovik.app/tovik.js\"></script>")
                        </CodeBlock>
                        <li>Click <strong>Save</strong>.</li>
                    </ol>                    
                    <p>That's it! Your site will now start automatically translating all of your content based on your visitors' language preferences.</p>
                    
                    <h3>Notes</h3>
                    <ul>
                        <li>The menu location may vary, but the option is always called <strong>Code Injection</strong>.</li>
                        <li>Add the code to the section labeled <strong>Footer</strong> so the script loads at the end of the <code translate="no">&lt;&sol;body&gt;</code>.</li>                        
                        <li>In Squarespace’s site editor, scripts may not run. Always test on your published site in an incognito/private window.</li>
                        <li>Checkout pages generally do not support injected scripts.</li>
                    </ul>
                </div>
            </section>
        }

        @if (SelectedPlatform == "Webflow")
        {
            <section class="step-1">
                <header>
                    <aside>Step 1</aside>
                    <h3>Add Tovik To Your Webflow Site</h3>
                </header>
                <div>
                    <ol>
                        <li>Log in to your Webflow account.</li>
                        <li>Click the button labeled <strong>Site Settings</strong> on the site in which you want to enable Tovik.</li>
                        <li>
                            In the left-hand menu, click <strong>Custom Code</strong>:                        </li>

                        <li>
                            Paste the following snippet into the section labeled <strong>Footer code</strong>:
                        </li>
                        <CodeBlock CanCopy=true>
                            @("<script type=\"module\" src=\"https://tovik.app/tovik.js\"></script>")
                        </CodeBlock>
                        <li>Click <strong>Save changes</strong>.</li>
                    </ol>
                    <p>That's it! Your site will now start automatically translating all of your content based on your visitors' language preferences.</p>

                    <h3>Notes</h3>
                    <ul>
                        <li>Add the code to the section labeled <strong>Footer</strong> so the script loads at the end of the <code translate="no">&lt;&sol;body&gt;</code>.</li>
                        <li>The effects of custom code appear in preview mode, but they won’t go live until your site is published. </li>
                    </ul>
                </div>
            </section>
        }

        <section class="step-1">
            <header>
                <aside>Step 2</aside>
                <h3>Register Your Domain on Tovik</h3>
            </header>
            <div>
                <p>Now, enter the domain name of the website where you just installed the Tovik plugin. Tovik will verify that it is installed correctly and will start tracking your page usage.</p>
                <Tovik.Domains.AddDomain />
            </div>
        </section>

        @if (SelectedPlatform == "HTML")
        {
            <section class="step-2">
                <img src="/images/Star.svg" alt="Star" />
                <header>
                    <aside>Step 3 (recommended, intermediate)</aside>
                    <h3>Let Your Visitors Choose Their Language</h3>
                </header>
                <div>
                    <p>Automatic is great, but choice is better. Adding a language selector gives your visitors full control—especially helpful if their browser settings don’t reflect their actual language preference.</p>
                    <p>To add a dropdown language picker to your page, insert this wherever you want it to appear:</p>
                    <CodeBlock CanCopy=true>
                        @("<tovik-language></tovik-language>")
                    </CodeBlock>
                    <p>
                        It comes pre-loaded with supported languages and behaves like a regular HTML element, so you can customize the look to match your brand. Here’s some example styling:
                    </p>
                    <CodeBlock CanCopy=true Language="css">
                        tovik-language select {
                        appearance: none; /* Removes default styling */
                        background-color: #f9f9f9;
                        color: #333;
                        padding: 10px 14px;
                        border: 1px solid #ccc;
                        border-radius: 6px;
                        font-size: 16px;
                        font-family: sans-serif;
                        }
                    </CodeBlock>
                </div>
            </section>

            <section>
                <img src="/images/Star.svg" alt="Star" />
                <header>
                    <aside>Step 4 (optional, advanced)</aside>
                    <h3>Choose What Gets Translated</h3>
                </header>
                <div>
                    <p>
                        By default, Tovik translates your whole site. But if you want more control, you can specify exactly which sections should (or shouldn’t) be translated.
                    </p>
                    <p>To target a specific section, use:</p>
                    <CodeBlock CanCopy=true>
                        @("<tovik-translate for=\"{selector}\"></tovik-translate>")
                    </CodeBlock>
                    <p>Where <code>&lcub;selector&rcub;</code> is the CSS selector you'd like Tovik to translate.</p>
                    <p>You can include multiple <code translate="no">&lt;tovik-translate&gt;</code> tags as well, if you have multiple separate sections you wish to translate.</p>
                    <h4>Examples:</h4>
                    <p>To translate an element with an ID of translate-this:</p>
                    <CodeBlock CanCopy="true">
                        @("<tovik-translate for=\"#translate-this\"></tovik-translate>")
                    </CodeBlock>
                    <p>To translate all elements with the CSS class .translate:</p>
                    <CodeBlock CanCopy="true">
                        @("<tovik-translate for=\".translate\"></tovik-translate>")
                    </CodeBlock>
                </div>

                <h4>That's It</h4>
                <p>
                    Whether you want plug-and-play simplicity or more control, Tovik is built to meet you where you are—no developer required.
                </p>
            </section>
        }       
    </div>
</article>

@code {
    private string SelectedPlatform { get; set; } = "WordPress";
    List<string> Platforms = ["WordPress", "Wix", "HTML", "SquareSpace", "Webflow"];
    List<string> ComingSoon = [];
    private void Select(string platform)
    {
        SelectedPlatform = platform;
    }
}
